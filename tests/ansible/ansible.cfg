[defaults]
any_errors_fatal = true
# callback_whitelist naming will be deprecated in ansible-core >= 2.15.
# callbacks_enabled naming was added in ansible-core 2.11
# profile_tasks: Displays timing for each task and summary table of top N tasks
# timer: Displays "Playbook run took 0 days, 0 hours, ..."
callback_whitelist =
    profile_tasks,
    timer
inventory = hosts
gathering = explicit
strategy_plugins = ../../ansible_mitogen/plugins/strategy
inventory_plugins = lib/inventory
action_plugins = lib/action
callback_plugins = lib/callback
stdout_callback = yaml
vars_plugins = lib/vars
library = lib/modules
filter_plugins = lib/filters
module_utils = lib/module_utils
retry_files_enabled = False
show_task_path_on_failure = true  # Added in ansible-core 2.11
display_args_to_stdout = True
forks = 100

# We use lots of deprecated functionality to support older versions.
deprecation_warnings = False

# issue #434; hosts/delegate_to; integration/delegate_to
remote_user = ansible-cfg-remote-user

# On MacOS, "smart" with a password set causes Ansible to use paramiko.
transport = ssh

no_target_syslog = True

# Required by integration/ssh/timeouts.yml
timeout = 30

# On Travis, paramiko check fails due to host key checking enabled.
host_key_checking = False

[inventory]
any_unparsed_is_failed = true
host_pattern_mismatch = error

[callback_profile_tasks]
task_output_limit = 10

[ssh_connection]
# https://www.openssh.com/legacy.html
# ssh-rsa uses SHA1. Least worst available with CentOS 7 sshd.
# Rejected by default in newer ssh clients (e.g. Ubuntu 22.04).
# Duplicated cases in
#   - tests/ansible/ansible.cfg
#   - tests/ansible/integration/connection_delegation/delegate_to_template.yml
#   - tests/ansible/integration/connection_delegation/stack_construction.yml
#   - tests/ansible/integration/process/unix_socket_cleanup.yml
#   - tests/ansible/integration/ssh/variables.yml
#   - tests/testlib.py
ssh_args =
    -o ControlMaster=auto
    -o ControlPersist=60s
    -o ForwardAgent=yes
    -o HostKeyAlgorithms=+ssh-rsa
    -o PubkeyAcceptedKeyTypes=+ssh-rsa
    -o UserKnownHostsFile=/dev/null
pipelining = True
